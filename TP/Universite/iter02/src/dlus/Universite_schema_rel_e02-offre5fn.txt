/*
-- =========================================================================== A
Produit : CoFELI.Exemple.Universite/2021
Composant : schema_rel_e02-offre5fn.txt
Responsable : Luc.LAVOIE@USherbrooke.ca
Version : 0.3.a (2021-02-25)
Statut : travail en cours
Encodage : UTF-8, sans BOM; fin de ligne simple (LF)
Plateformes : S. O.
-- =========================================================================== A
*/

/*
-- =========================================================================== B
== But

Illustrer la construction dâ€™un schÃ©ma relationnel simple selon les rÃ¨gles de lâ€™art.

== ProblÃ¨me

ModÃ©lisation des entitÃ©s utiles Ã  la gestion des inscriptions Ã©tudiantes universitaires.

== Ã‰tape 02

Traitement de lâ€™offre (planifiÃ©e et effective).

-- =========================================================================== B
*/

--
-- TYPES
--
type Bureau = ...
type Cause = ...
type CDC = ...
type MatriculeE = ...
type MatriculeP = ...
type NoGroupe = ...
type Nom = ...
type Note = ...
type Sigle = ...
type Titre = ...
type Trimestre = ...

--
-- RELATIONS
--
var Ã‰tudiant {matriculeE : MatriculeE, nom : Nom, ddn : Date}
  pred Â« Lâ€™Ã©tudiant identifiÃ© par le matricule "matriculeE" a pour nom "nom" et est nÃ© le "ddn". Â»
  df matriculeE -> nom
  df matriculeE -> ddn
  cle {matriculeE}

var Professeur {matriculeP : Matricule, nom : Nom}
  pred Â« Le professeur identifiÃ© par le matricule "matriculeP" a pour nom "nom". Â»
  df matriculeP -> nom
  cle {matriculeP}

var Professeur_Bureau_PRE {matriculeP : Matricule, bureau : Bureau}
  pred Â« Le professeur identifiÃ© par le matricule "matriculeP" a pour bureau "bureau". Â»
  df matriculeP -> bureau
  cle {matriculeP}
  ref {matriculeP} -> Professeur

var Professeur_Bureau_ABS {matriculeP : Matricule, cause : Cause}
  pred Â« Le professeur identifiÃ© par le matricule "matriculeP" nâ€™a pas de bureau
         pour la raison "cause". Â»
  df matriculeP -> cause
  cle {matriculeP}
  ref {matriculeP} -> Professeur

inv Professeur_Bureau_INV
  pred Â« Tout professeur a soit un bureau soit une raison pour laquelle il nâ€™en a pas. Â»
  Professeur ğ¹ {matriculeP} =
    ((Professeur_Bureau_ABS ğ¹ {matriculeP})
      UnionD (Professeur_Bureau_PRE ğ¹ {matriculeP})

var Cours {sigle : Sigle, titre : Titre, crÃ©dit: CDC}
  pred Â« Le cours identifiÃ© par le sigle "sigle" a pour titre "titre" et
         comporte "credit" crÃ©dit(s). Â»
  df sigle -> titre
  df sigle -> crÃ©dit
  cle {sigle}

var Groupe {sigle : Sigle, trimestre : Trimestre, noGroupe : NoGroupe}
  pred Â« Le groupe identifiÃ© par le sigle "sigle" et le numÃ©ro "noGroupe"
         au sein du trimestre "trimestre" est constituÃ©. Â»
  cle {sigle, trimestre, noGroupe}
  ref {sigle} -> Cours

var Affectation {sigle : Sigle, trimestre : Trimestre, noGroupe : NoGroupe, matriculeP : MatriculeP}
  pred Â« Le professeur "matriculeP" assure la formation du groupe identifiÃ© par
         sigle "sigle", le numÃ©ro "noGroupe" et le trimestre "trimestre". Â»
  -- Pour permettre Ã  un groupe de professeurs dâ€™assurer la formation, il faudrait
  -- ajouter matriculeP Ã  la clÃ© candidate.
  cle {sigle, trimestre, noGroupe}
  ref {sigle, trimestre, noGroupe} -> Groupe
  ref {matriculeP} -> Professeur

var Inscription {matriculeE : MatriculeE, sigle : Sigle, trimestre : Trimestre, noGroupe : NoGroupe)
  pred Â« Lâ€™Ã©tudiant "matriculeE" est inscrit au groupe identifiÃ© par
         sigle "sigle", le numÃ©ro "noGroupe" et le trimestre "trimestre". Â»
  cle {matriculeE, sigle, trimestre, noGroupe}
  ref {sigle, trimestre, noGroupe} -> Groupe

var Ã‰valuation {matriculeE : MatriculeE, sigle : Sigle, trimestre : Trimestre, noGroupe : NoGroupe, note : Note)
  pred Â« Lâ€™Ã©tudiant "matriculeE" inscrit au groupe identifiÃ© par
         sigle "sigle", le numÃ©ro "noGroupe" et le trimestre "trimestre"
         a obtenu la note "note". Â»
  df sigle, trimestre, noGroupe, matriculeE -> note
  cle {matriculeE, sigle, trimestre, noGroupe}
  ref {sigle, trimestre, noGroupe, matriculeE} -> Inscription

var PrÃ©alable {sigle, siglePrÃ©alable}
  pred Â« Lâ€™inscription au cours "sigle" nâ€™est autorisÃ©e quâ€™aux Ã©tudiants qui auront rÃ©ussi
         le cours "siglePrÃ©alable" avant le dÃ©but du cours "sigle". Â»
  cle {sigle, siglePrÃ©alable}
  ref {sigle} -> Cours
  ref {siglePralable -> sigle} -> Cours

var Offre {sigle : Sigle, trimestre : Trimestre}
  pred Â« Lâ€™UniversitÃ© sâ€™engage Ã  offrir le cours "sigle" au trimestre "trimestre". Â»
  -- correspond Ã  lâ€™offre planifiÃ©e
  cle {sigle, trimestre}
  ref {sigle} -> Cours

var CompÃ©tence {sigle : Sigle, matriculeP : MatriculeP}
  pred Â« Le professeur "matriculeP" est compÃ©tent pour enseigner le cours "sigle". Â»
  cle {sigle, matriculeP}
  ref {sigle} -> Cours
  ref {matriculeP} -> Professeur

var DisponibilitÃ© {trimestre : Trimestre, matriculeP : MatriculeP}
  pred Â« Le professeur "matriculeP" est disponible pour enseigner au trimestre "trimestre". Â»
  cle {trimestre, matriculeP}
  ref {trimestre} -> Cours
  ref {matriculeP} -> Professeur

inv Affectation_comp
  pred Â« Affectation est conforme Ã  CompÃ©tence. Â»
  Affectation ğ¹ {sigle, matricleP} âŠ† CompÃ©tence

inv Affectation_disp
  pred Â« Affectation est conforme Ã  DisponibilitÃ©. Â»
  Affectation ğ¹ {trimestre, matriculeP} âŠ† DisponibilitÃ©

fun Offre_non_couverte () : relation {sigle : Sigle; trimestre : Trimestre}
  res Â« Les cours de lâ€™offre (planifiÃ©e) non couverts par lâ€™affection (offre effective). Â»
  return (Offre - Affectation ğ¹ {sigle, trimestre})

fun Offre_eff_conf_pla () : boolean
  res Â« Affectation (offre effective) est conforme Ã  lâ€™offre (planifiÃ©e). Â»
  return Offre_non_couverte () = âˆ…

/*
-- =========================================================================== Y
== Question

Il eut Ã©tÃ© incorrect de dÃ©finir lâ€™invariant suivant en lieu et place des
fonctions Offre_non_couverte et Offre_eff_conf_pla. Pourquoi ?

inv Affectation_offre
  pred Â« Affectation est conforme Ã  Offre. Â»
  (Offre - Affection ğ¹ {sigle, trimestre}) = âˆ…
-- =========================================================================== Y
*/

/*
-- =========================================================================== Z
== Contributeurs
  (CK) Christina.KHNAISSER@USherbrooke.ca,
  (LL) Luc.LAVOIE@USherbrooke.ca

== Adresse, droits dâ€™auteur et copyright
  Groupe Îœá¿†Ï„Î¹Ï‚ (MÃ©tis)
  DÃ©partement dâ€™informatique
  FacultÃ© des sciences
  UniversitÃ© de Sherbrooke
  Sherbrooke (QuÃ©bec)  J1K 2R1
  Canada
  http://info.usherbrooke.ca/llavoie/
  [CC-BY-NC-4.0 (http://creativecommons.org/licenses/by-nc/4.0)]

== TÃ¢ches projetÃ©es
TODO 2020-09-17 (LL) : RÃ©aliser les Ã©tapes subsÃ©quentes
  * e03 : dÃ©finition des types Ã  partir du dictionnaire de donnÃ©es.
    ** Illustration du bon usage des contraintes de type.
  * e04 : affinement des types Cause (dâ€™absence), Sigle (de cours) et Trimestre
    ** Illustration des tables de code.
    ** Illustration des dangers des attributs composites, en particulier en regard des clÃ©s.
  * e05 : affinement du concept de trimestre.
    ** Illustration de lâ€™explicitation des attributs afin dâ€™Ã©viter les Â« constantes cachÃ©es Â».
  * e06 : division en schÃ©mas.
    ** Gestion de la complexitÃ© et du couplage par la visibilitÃ©.
    ** Gestion de lâ€™intÃ©gritÃ© et de la sÃ©curitÃ© par le contrÃ´le dâ€™accÃ¨s.

== TÃ¢ches rÃ©alisÃ©es
2020-03-25 (LL) : RÃ©alisation de lâ€™Ã©tape 02
  * Traitement explicite de lâ€™offre de cours (programmÃ©e et effective).
    ** Illustration du traitement de la 5FN.
2021-02-23 (LL) : RÃ©alisation de lâ€™Ã©tape e01.
  * Prise en compte de lâ€™absence potentielle de certaines valeurs.
    ** Illustration du traitement de lâ€™annulabilitÃ© :
       *** cas non applicable (note lors de lâ€™inscription) ;
       *** cas non disponible (bureau du professeur) ;
       *** par DPJ ;
       *** par DRU.
2021-02-18 (LL) : RÃ©alisation de lâ€™Ã©tape e00.
  * Prise en compte des entitÃ©s de base Ã‰tudiant, Professeur, Cours, Groupe...
    ** Illustration de la construction par entitÃ© et dÃ©pendances fonctionnelles.
2021-02-15 (LL) : CrÃ©ation initiale inspirÃ©e de lâ€™exemple dÃ©veloppÃ© en 2014.

== RÃ©fÃ©rences
[ddv] http://info.usherbrooke.ca/llavoie/enseignement/Exemples/Universite/
      Universite_DDV.pdf
[std] http://info.usherbrooke.ca/llavoie/enseignement/Modules/
      BD190-STD-SQL-01_NDC.pdf
-- =========================================================================== Z
*/
